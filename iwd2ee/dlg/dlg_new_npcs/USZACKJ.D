BEGIN ~USZACKJ~

IF ~~ THEN BEGIN 0
  SAY @40306
  IF ~~ THEN EXTERN ~USREIGJ~ 30
  IF ~InParty("USVUNA")
See("USVUNA",0)
!StateCheck("USVUNA", EX_NO_DIALOGUE)~ THEN EXTERN ~USVUNAJ~ 0
  IF ~InParty("USEMMA")
See("USEMMA",0)
!StateCheck("USEMMA", EX_NO_DIALOGUE)~ THEN EXTERN ~USEMMAJ~ 0
END

IF ~InParty(Myself)
Global("BANTERUSZACKJ","GLOBAL",1)~ THEN BEGIN 1
  SAY @40889
  IF ~IEex_LuaTrigger("return IEex_IfValidForPartyDialogue(USGEOF)")~ THEN DO ~SetGlobal("DIDBANTERUSZACKJ1","GLOBAL",1)
SetGlobal("BANTERUSZACKJ","GLOBAL",0)~ EXTERN ~USGEOFJ~ 78
END

IF ~InParty(Myself)
Global("BANTERUSZACKJ","GLOBAL",2)~ THEN BEGIN 2
  SAY @40891
  IF ~~ THEN REPLY @40892 DO ~SetGlobal("DIDBANTERUSZACKJ2","GLOBAL",1)
SetGlobal("BANTERUSZACKJ","GLOBAL",0)~ GOTO 3
  IF ~~ THEN REPLY @40893 DO ~SetGlobal("DIDBANTERUSZACKJ2","GLOBAL",1)
SetGlobal("BANTERUSZACKJ","GLOBAL",0)~ GOTO 5
  IF ~~ THEN REPLY @40894 DO ~SetGlobal("DIDBANTERUSZACKJ2","GLOBAL",1)
SetGlobal("BANTERUSZACKJ","GLOBAL",0)~ GOTO 6
END

IF ~~ THEN BEGIN 3
  SAY @40895
  IF ~~ THEN GOTO 4
END

IF ~~ THEN BEGIN 4
  SAY @40896
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 5
  SAY @40897
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 6
  SAY @40898
  IF ~~ THEN GOTO 7
END

IF ~~ THEN BEGIN 7
  SAY @40899
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 8
  SAY @40912
  IF ~~ THEN GOTO 9
END

IF ~~ THEN BEGIN 9
  SAY @40913
  IF ~~ THEN EXTERN ~USEMMAJ~ 67
END

IF ~InParty(Myself)
Global("BANTERUSZACKJ","GLOBAL",3)~ THEN BEGIN 10
  SAY @40917
  IF ~~ THEN DO ~SetGlobal("DIDBANTERUSZACKJ3","GLOBAL",1)
SetGlobal("BANTERUSZACKJ","GLOBAL",0)~ EXTERN ~USXHAAJ~ 6
END

IF ~~ THEN BEGIN 11
  SAY @40919
  IF ~~ THEN EXIT
END

IF ~InParty(Myself)
Global("BANTERUSZACKJ","GLOBAL",4)~ THEN BEGIN 12
  SAY @40920
  IF ~~ THEN DO ~SetGlobal("DIDBANTERUSZACKJ4","GLOBAL",1)
SetGlobal("BANTERUSZACKJ","GLOBAL",0)~ EXTERN ~USXHAAJ~ 7
END

IF ~~ THEN BEGIN 13
  SAY @40922
  IF ~~ THEN EXTERN ~USXHAAJ~ 8
END

IF ~~ THEN BEGIN 14
  SAY @40924
  IF ~~ THEN EXTERN ~USXHAAJ~ 9
END

IF ~~ THEN BEGIN 15
  SAY @40926
  IF ~~ THEN DO ~ActionOverride("USXHAA",ApplySpellRES("USDDAM01","USZACK"))~ EXTERN ~USXHAAJ~ 10
END

IF ~~ THEN BEGIN 16
  SAY @40928
  IF ~~ THEN EXIT
END